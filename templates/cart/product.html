{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container"><br>
  <div class="row">
    <div class="col-12">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'index' %}">Главная</a></li>
          <li class="breadcrumb-item"><a href="{% url 'listing' %}">Каталог</a></li>
          <li class="breadcrumb-item active" aria-current="page">Текущая</li>
        </ol>
      </nav>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <h2 class="text-danger">{{product.brand}} {{product.model_name}} {{product.color}} {{product.hdd}}/{{product.ram}}Gb</h2>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4">
      
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="{{product.image.url}}" class="d-block w-50" alt="No Image Available">
          </div>
          <div class="carousel-item">
            <img src="{{product.image_1.url}}" class="d-block w-50" alt="No Image Available">
          </div>
          <div class="carousel-item">
            <img src="{{product.image_2.url}}" class="d-block w-50" alt="No Image Available">
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      
      </div>
    </div>


    <div class="col-sm-8 text-danger">
      <h2>{{product.price}} руб.</h2><br>
      {% if product.stock <= 0 %}
        <p class="text-justify product_text text-danger"><b>Out of Stock</b></p>
      {% else %}
        <a href="{% url 'add_cart' product.slug %}">
          <button type="button" name="button" class="btn btn-danger">
            Купить
          </button>
        </a>
      {% endif %}
      <br><br>
      {{product.description}}
     
    </div>
  </div><br>
  <div class="row">
    <div class="col-sm-6">

    </div>
  </div><br>

  <div class="row">
    <div class="col-sm-6">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#features" role="tab" aria-controls="home" aria-selected="true">Характеристики</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#accessories" role="tab" aria-controls="profile" aria-selected="false">Аксессуары</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="contact-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="contact" aria-selected="false">Отзывы</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="features" role="tabpanel" aria-labelledby="home-tab">
          <br>
            <div class="row bg-light">
              <div class="col-6">Диагональ экрана</div>
              <div class="col-6">{{product.display}} дюйма</div>
            </div><br>
            <div class="row">
              <div class="col-6">Операционная система</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Встроенная память</div>
              <div class="col-6">{{product.hdd}} Gb</div>
            </div><br>
            <div class="row">
              <div class="col-6">Оперативная память</div>
              <div class="col-6">{{product.ram}} Gb</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Процессор</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Количество ядер процессора</div>
              <div class="col-6">{{product.processor_core}}</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Частота процессора</div>
              <div class="col-6">{{product.processor_frequency}}</div>
            </div><br>
            <div class="row">
              <div class="col-6">Разрешение основной камеры</div>
              <div class="col-6">{{product.camera_1}}</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Разрешение второй камеры</div>
              <div class="col-6">{{product.camera_2}}</div>
            </div><br>
            <div class="row">
              <div class="col-6">Разрешение фронтальной камеры</div>
              <div class="col-6">{{product.front_camera}}</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Разрешение видеосъемки</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Емкость аккумулятора</div>
              <div class="col-6">{{product.battery}} mAh</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Интернет</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Беспроводные соединения</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">NFC</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Биометрическая защита</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Беспроводная зарядка</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Навигация</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Количество сим карт</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Гарантия</div>
              <div class="col-6">12 мес </div>
            </div><br>
            <div class="row bg-light">
              <div class="col-6">Материал корпуса</div>
              <div class="col-6">No data available</div>
            </div><br>
            <div class="row">
              <div class="col-6">Страна производитель</div>
              <div class="col-6">No data available</div><br><br>
            </div>
        </div>

        <div class="tab-pane fade" id="accessories" role="tabpanel" aria-labelledby="profile-tab"><br>
          <div class="row">
            {% for accs in accessories %}
            <div class="col-3">
              {{accs.name}}
              <a href="{% url 'accessory_detail' accs.id %}">
                <img src="{{accs.image.url}}" width='100' alt="{accs.name}}">
              </a>
            </div>
              {% endfor %}
          </div>
        </div>

        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="contact-tab"><br>
          {%if user.is_authenticated %}
            <div class="card-body">

              <form action="{% url 'reviews' product.id %}" method ="POST"> 
                {% csrf_token %}
                <input type="text" class="form-control" name='content'></textarea><br>
                <button type="submit" class="btn btn-primary">Оставить отзыв</button>
              </form>
            </div>
          {% else %}
            <p>Только зарегистрированные пользователи могут оставлять отзывы. Пожалуйста 
              <a href="{% url 'register' %}">
                зарегистрируйтесь
              </a>
              или
            <a href="{% url 'login' %}">
              войдите
            </a>
            под своей учетной записью.</p>
          {% endif %}

          {% if comments.count > 0%}
            {% for comment in comments %}
          <div class="row border-bottom">
            <!-- <div class="alert alert-warning" role="alert"> -->
            <div class="col-6">{{comment.user.username}}<br>
            {{comment.created}}</div>
            <div class="col-6">{{comment.review}}</div>
          <!-- </div>  -->
            <!-- <div class="row bg-light"></div> -->
          </div><br>
            {% endfor %}
          {% endif %}
    
        </div>
      </div>
    </div>
  </div>
</div>


{% endblock %}